<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>libx264 x264_param_t</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="icylord">

    <!-- Le styles -->
    <link rel="stylesheet" href="http://icylord.github.io/theme/css/bootstrap.min.css" type="text/css" />
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
      .sidebar-nav {
        padding: 9px 0;
      }
      .tag-1 {
        font-size: 13pt;
      }
      .tag-2 {
        font-size: 10pt;
      }
      .tag-2 {
        font-size: 8pt;
      }
      .tag-4 {
        font-size: 6pt;
     }
    </style>
    <link href="http://icylord.github.io/theme/css/bootstrap-responsive.min.css" rel="stylesheet">
        <link href="http://icylord.github.io/theme/css/font-awesome.css" rel="stylesheet">

    <link href="http://icylord.github.io/theme/css/pygments.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="//html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="http://icylord.github.io/theme/images/favicon.ico">
    <link rel="apple-touch-icon" href="http://icylord.github.io/theme/images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="http://icylord.github.io/theme/images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="http://icylord.github.io/theme/images/apple-touch-icon-114x114.png">

    <link href="http://icylord.github.io/" type="application/atom+xml" rel="alternate" title="icylord's blog ATOM Feed" />

  </head>

  <body>

    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="http://icylord.github.io/index.html">icylord's blog </a>
          <div class="nav-collapse">
            <ul class="nav">
                          <li class="divider-vertical"></li>
                  <li >
                    <a href="http://icylord.github.io/category/c.html">
						<i class="icon-folder-open icon-large"></i>C++
					</a>
                  </li>
                  <li >
                    <a href="http://icylord.github.io/category/computer-vision.html">
						<i class="icon-folder-open icon-large"></i>Computer Vision
					</a>
                  </li>
                  <li class="active">
                    <a href="http://icylord.github.io/category/multimedia.html">
						<i class="icon-folder-open icon-large"></i>Multimedia
					</a>
                  </li>
                  <li >
                    <a href="http://icylord.github.io/category/shell.html">
						<i class="icon-folder-open icon-large"></i>Shell
					</a>
                  </li>

                          <ul class="nav pull-right">
                                <li><a href="http://icylord.github.io/archives.html"><i class="icon-th-list"></i>Archives</a></li>
                          </ul>

            </ul>
            <!--<p class="navbar-text pull-right">Logged in as <a href="#">username</a></p>-->
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <div class="row">
        <div class="span9" id="content">
<section id="content">
        <article>
                <header>
                        <h1>
                                <a href=""
                                        rel="bookmark"
                                        title="Permalink to libx264 x264_param_t">
                                        libx264 x264_param_t
                                </a>
                        </h1>
                </header>
                <div class="entry-content">
                <div class="well">
<footer class="post-info">
<span class="label">Date</span>
<abbr class="published" title="2014-09-21T00:00:00">
        <i class="icon-calendar"></i>Sun 21 September 2014
</abbr>
<span class="label">By</span>
<a href="http://icylord.github.io/author/icylord.html"><i class="icon-user"></i>icylord</a>
<span class="label">Category</span>
<a href="http://icylord.github.io/category/multimedia.html"><i class="icon-folder-open"></i>Multimedia</a>.


<span class="label">Tags</span>
	<a href="http://icylord.github.io/tag/h264.html"><i class="icon-tag"></i>H.264</a>
</footer><!-- /.post-info -->                </div>
                <h2>libx264 x264_param_t</h2>
<h3>转一个别人写好的libx264参数结构体x264_param_t的参数解析</h3>
<div class="highlight"><pre><span class="cm">/* 结构体x264_param_t定义在x264.h中 */</span>
<span class="k">typedef</span> <span class="k">struct</span> <span class="kt">x264_param_t</span>
<span class="p">{</span>
    <span class="cm">/* CPU 标志位 */</span>
    <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">cpu</span><span class="p">;</span>
    <span class="kt">int</span>  <span class="n">i_threads</span><span class="p">;</span>                 <span class="c1">// 并行编码多帧; 线程数，为0则自动多线程编码</span>
    <span class="kt">int</span>  <span class="n">b_sliced_threads</span><span class="p">;</span>          <span class="c1">// 如果为false，则一个slice只编码成一个NALU;</span>
                                    <span class="c1">// 否则有几个线程，在编码成几个NALU。缺省为true。</span>
    <span class="kt">int</span>  <span class="n">b_deterministic</span><span class="p">;</span>           <span class="c1">// 是否允许非确定性时线程优化</span>
    <span class="kt">int</span>  <span class="n">b_cpu_independent</span><span class="p">;</span>     <span class="c1">// 强制采用典型行为，而不是采用独立于cpu的优化算法</span>
    <span class="kt">int</span>  <span class="n">i_sync_lookahead</span><span class="p">;</span>          <span class="c1">// 线程超前缓存帧数</span>

    <span class="cm">/* 视频属性 */</span>
    <span class="kt">int</span>  <span class="n">i_width</span><span class="p">;</span>               <span class="c1">// 视频图像的宽</span>
    <span class="kt">int</span>  <span class="n">i_height</span><span class="p">;</span>              <span class="c1">// 视频图像的高</span>
    <span class="kt">int</span>  <span class="n">i_csp</span><span class="p">;</span>                     <span class="c1">// 编码比特流的CSP，仅支持i420，色彩空间设置</span>
    <span class="kt">int</span>  <span class="n">i_level_idc</span><span class="p">;</span>           <span class="c1">// 指明作用的level值，可能与编码复杂度有关</span>
    <span class="kt">int</span>  <span class="n">i_frame_total</span><span class="p">;</span>             <span class="c1">// 编码帧的总数, 默认 0</span>

    <span class="cm">/* hrd : hypothetical reference decoder (假定参考解码器) , 检验编码器产生的符合</span>
<span class="cm">      该标准的NAL单元流或字节流的偏差值。蓝光视频、电视广播及其它特殊领域有此要求 */</span>
    <span class="kt">int</span>  <span class="n">i_nal_hrd</span><span class="p">;</span>

    <span class="cm">/* vui参数集 : 视频可用性信息、视频标准化选项 */</span>
    <span class="k">struct</span>
    <span class="p">{</span>
        <span class="cm">/* 宽高比的两个值相对互素，且在(0,  65535] 之间 */</span>
        <span class="kt">int</span>  <span class="n">i_sar_height</span><span class="p">;</span>          <span class="c1">// 样本宽高比的高度</span>
    <span class="kt">int</span>  <span class="n">i_sar_width</span><span class="p">;</span>       <span class="c1">// 样本宽高比的宽度</span>

    <span class="cm">/* 0=undef, 1=no overscan, 2=overscan 过扫描线，</span>
<span class="cm">        默认&quot;undef&quot;(不设置)，可选项：show(观看) / crop(去除) */</span>
    <span class="kt">int</span>  <span class="n">i_overscan</span><span class="p">;</span>

    <span class="cm">/* 以下的值可以参见H264附录E */</span>
    <span class="kt">int</span>  <span class="n">i_vidformat</span><span class="p">;</span>           <span class="c1">// 视频在编码/数字化之前是什么类型，默认&quot;undef&quot;.</span>
                                <span class="c1">// 取值有：Component, PAL, NTSC, SECAM, MAC 等</span>
    <span class="kt">int</span>  <span class="n">b_fullrange</span><span class="p">;</span>           <span class="c1">// 样本亮度和色度的计算方式，默认&quot;off&quot;，可选项：off/on</span>
    <span class="kt">int</span>  <span class="n">i_colorprim</span><span class="p">;</span>           <span class="c1">// 原始色度格式，默认&quot;undef&quot;</span>
    <span class="kt">int</span>  <span class="n">i_transfer</span><span class="p">;</span>            <span class="c1">// 转换方式，默认&quot;undef&quot;</span>
    <span class="kt">int</span>  <span class="n">i_colmatrix</span><span class="p">;</span>           <span class="c1">// 设置从RGB计算得到亮度和色度所用的矩阵系数，默认&quot;undef&quot;</span>
    <span class="kt">int</span>  <span class="n">i_chroma_loc</span><span class="p">;</span>          <span class="c1">// 设置色度采样位置，范围0~5，默认0</span>
    <span class="p">}</span> <span class="n">vui</span><span class="p">;</span>

    <span class="cm">/* 比特流参数 */</span>
    <span class="kt">int</span>  <span class="n">i_frame_reference</span><span class="p">;</span>         <span class="c1">// 最大参考帧数目</span>
    <span class="kt">int</span>  <span class="n">i_dpb_size</span><span class="p">;</span>                <span class="c1">// Decoded picture buffer size</span>
    <span class="kt">int</span>  <span class="n">i_keyint_max</span><span class="p">;</span>              <span class="c1">// 设定IDR帧之间的最间隔，在此间隔设置IDR关键帧</span>
    <span class="kt">int</span>  <span class="n">i_keyint_min</span><span class="p">;</span>              <span class="c1">// 设定IDR帧之间的最小间隔, 场景切换小于此值编码位I帧, 而不是 IDR帧.</span>
    <span class="kt">int</span>  <span class="n">i_scenecut_threshold</span><span class="p">;</span>      <span class="c1">// 场景切换阈值，插入I帧</span>
    <span class="kt">int</span>  <span class="n">b_intra_refresh</span><span class="p">;</span>           <span class="c1">// 是否使用周期帧内刷新替代IDR帧</span>
    <span class="kt">int</span>  <span class="n">i_bframe</span><span class="p">;</span>                  <span class="c1">// 两个参考帧之间的B帧数目</span>
    <span class="kt">int</span>  <span class="n">i_bframe_adaptive</span><span class="p">;</span>         <span class="c1">// 自适应B帧判定, 可选取值：X264_B_ADAPT_FAST等</span>
    <span class="kt">int</span>  <span class="n">i_bframe_bias</span><span class="p">;</span>             <span class="c1">// 控制B帧替代P帧的概率，范围-100 ~ +100，</span>
                                    <span class="c1">// 该值越高越容易插入B帧，默认0.</span>
    <span class="kt">int</span>  <span class="n">i_bframe_pyramid</span><span class="p">;</span>          <span class="c1">// 允许部分B帧为参考帧，</span>
                                    <span class="c1">// 可选取值：0=off,  1=strict hierarchical,  2=normal</span>
    <span class="kt">int</span>  <span class="n">b_open_gop</span><span class="p">;</span>                <span class="c1">// Close GOP是指帧间的预测都是在GOP中进行的。</span>
                                    <span class="c1">// 使用Open GOP，后一个GOP会参考前一个GOP的信息。</span>
    <span class="kt">int</span>  <span class="n">b_bluray_compat</span><span class="p">;</span>           <span class="c1">// 支持蓝光碟</span>

    <span class="cm">/* 去块滤波器需要的参数, alpha和beta是去块滤波器参数 */</span>
    <span class="kt">int</span>  <span class="n">b_deblocking_filter</span><span class="p">;</span>        <span class="c1">// 去块滤波开关</span>
    <span class="kt">int</span>  <span class="n">i_deblocking_filter_alphac0</span><span class="p">;</span><span class="c1">// [-6, 6] -6 light filter, 6 strong</span>
    <span class="kt">int</span>  <span class="n">i_deblocking_filter_beta</span><span class="p">;</span>   <span class="c1">// [-6, 6] 同上</span>
    <span class="kt">int</span>  <span class="n">b_cabac</span><span class="p">;</span>                    <span class="c1">// 自适应算术编码cabac开关</span>
    <span class="kt">int</span>  <span class="n">i_cabac_init_idc</span><span class="p">;</span>           <span class="c1">// 给出算术编码初始化时表格的选择</span>
    <span class="kt">int</span>  <span class="n">b_interlaced</span><span class="p">;</span>               <span class="c1">// 隔行扫描</span>
    <span class="kt">int</span>  <span class="n">b_constrained_intra</span><span class="p">;</span>

     <span class="cm">/* 量化 */</span>
    <span class="kt">int</span>  <span class="n">i_cqm_preset</span><span class="p">;</span>              <span class="c1">// 自定义量化矩阵(CQM), 初始化量化模式为flat</span>
    <span class="kt">char</span> <span class="o">*</span><span class="n">psz_cqm_file</span><span class="p">;</span>             <span class="c1">// 读取JM格式的外部量化矩阵文件，忽略其他cqm选项</span>
    <span class="kt">uint8_t</span>  <span class="n">cqm_4iy</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>           <span class="c1">// used only if i_cqm_preset == X264_CQM_CUSTOM   </span>
    <span class="kt">uint8_t</span>  <span class="n">cqm_4py</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
    <span class="kt">uint8_t</span>  <span class="n">cqm_4ic</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
    <span class="kt">uint8_t</span>  <span class="n">cqm_4pc</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
    <span class="kt">uint8_t</span>  <span class="n">cqm_8iy</span><span class="p">[</span><span class="mi">64</span><span class="p">];</span>
    <span class="kt">uint8_t</span>  <span class="n">cqm_8py</span><span class="p">[</span><span class="mi">64</span><span class="p">];</span>
    <span class="kt">uint8_t</span>  <span class="n">cqm_8ic</span><span class="p">[</span><span class="mi">64</span><span class="p">];</span>
    <span class="kt">uint8_t</span>  <span class="n">cqm_8pc</span><span class="p">[</span><span class="mi">64</span><span class="p">];</span>

    <span class="cm">/* 日志 */</span>
    <span class="kt">void</span>  <span class="p">(</span><span class="o">*</span><span class="n">pf_log</span><span class="p">)(</span> <span class="kt">void</span> <span class="o">*</span><span class="p">,</span> <span class="kt">int</span> <span class="n">i_level</span><span class="p">,</span> <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">psz</span><span class="p">,</span> <span class="kt">va_list</span> <span class="p">);</span>     <span class="c1">// 日志函数</span>
    <span class="kt">void</span>  <span class="o">*</span><span class="n">p_log_private</span><span class="p">;</span>
    <span class="kt">int</span>    <span class="n">i_log_level</span><span class="p">;</span>             <span class="c1">// 日志级别，不需要打印编码信息时直接注释掉即可</span>
    <span class="kt">int</span>    <span class="n">b_visualize</span><span class="p">;</span>             <span class="c1">// 是否显示日志</span>
    <span class="kt">char</span>   <span class="o">*</span><span class="n">psz_dump_yuv</span><span class="p">;</span>           <span class="c1">//  重建帧的文件名</span>

    <span class="cm">/* 编码分析参数 */</span>
    <span class="k">struct</span>
    <span class="p">{</span>
        <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">intra</span><span class="p">;</span>             <span class="c1">//  帧内分区</span>
        <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">inter</span><span class="p">;</span>             <span class="c1">//  帧间分区</span>
        <span class="kt">int</span>  <span class="n">b_transform_8x8</span><span class="p">;</span>           <span class="c1">// </span>
        <span class="kt">int</span>  <span class="n">i_weighted_pred</span><span class="p">;</span>           <span class="c1">// P帧权重</span>
        <span class="kt">int</span>  <span class="n">b_weighted_bipred</span><span class="p">;</span>         <span class="c1">// B帧隐式加权</span>
        <span class="kt">int</span>  <span class="n">i_direct_mv_pred</span><span class="p">;</span>          <span class="c1">// 时间空间运动向量预测模式</span>
        <span class="kt">int</span>  <span class="n">i_chroma_qp_offset</span><span class="p">;</span>        <span class="c1">// 色度量化步长偏移量</span>
        <span class="kt">int</span>  <span class="n">i_me_method</span><span class="p">;</span>               <span class="c1">// 运动估计算法 (X264_ME_*)</span>
        <span class="kt">int</span>  <span class="n">i_me_range</span><span class="p">;</span>                <span class="c1">// 整像素运动估计搜索范围 (from predicted mv) </span>
        <span class="kt">int</span>  <span class="n">i_mv_range</span><span class="p">;</span>                <span class="c1">// 运动矢量最大长度. -1 = auto, based on level</span>
        <span class="kt">int</span>  <span class="n">i_mv_range_thread</span><span class="p">;</span>         <span class="c1">// 线程之间的最小运动向量缓冲.  -1 = auto, based on number of threads.</span>
        <span class="kt">int</span>  <span class="n">i_subpel_refine</span><span class="p">;</span>           <span class="c1">// 亚像素运动估计质量</span>
        <span class="kt">int</span>  <span class="n">b_chroma_me</span><span class="p">;</span>               <span class="c1">// 亚像素色度运动估计和P帧的模式选择</span>
        <span class="kt">int</span>  <span class="n">b_mixed_references</span><span class="p">;</span>        <span class="c1">// 允许每个宏块的分区有它自己的参考号</span>
        <span class="kt">int</span>  <span class="n">i_trellis</span><span class="p">;</span>                 <span class="c1">// Trellis量化提高效率，对每个8x8的块寻找合适的量化值，需要CABAC，</span>
                                        <span class="c1">// 0 ：即关闭  1：只在最后编码时使用  2：在所有模式决策上启用</span>
        <span class="kt">int</span>  <span class="n">b_fast_pskip</span><span class="p">;</span>              <span class="c1">// 快速P帧跳过检测</span>
        <span class="kt">int</span>  <span class="n">b_dct_decimate</span><span class="p">;</span>            <span class="c1">// P帧变换系数阈值</span>
        <span class="kt">int</span>  <span class="n">i_noise_reduction</span><span class="p">;</span>         <span class="c1">// 自适应伪盲区</span>
        <span class="kt">int</span>  <span class="n">b_psy</span><span class="p">;</span>                     <span class="c1">// Psy优化开关，可能会增强细节</span>
        <span class="kt">float</span>  <span class="n">f_psy_rd</span><span class="p">;</span>                <span class="c1">// Psy RD强度</span>
        <span class="kt">float</span>  <span class="n">f_psy_trellis</span><span class="p">;</span>           <span class="c1">// Psy Trellis强度</span>
        <span class="kt">int</span>  <span class="n">i_luma_deadzone</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>        <span class="c1">// 亮度量化中使用的盲区大小，{ 帧间, 帧内 }</span>
        <span class="kt">int</span>  <span class="n">b_psnr</span><span class="p">;</span>                    <span class="c1">// 计算和打印PSNR信息</span>
        <span class="kt">int</span>  <span class="n">b_ssim</span><span class="p">;</span>                    <span class="c1">// 计算和打印SSIM信息</span>
    <span class="p">}</span> <span class="n">analyse</span><span class="p">;</span>

    <span class="cm">/* 码率控制参数 */</span>
    <span class="k">struct</span>
    <span class="p">{</span>
        <span class="kt">int</span>  <span class="n">i_rc_method</span><span class="p">;</span>               <span class="c1">// 码率控制方式 ： X264_RC_CQP恒定质量,  </span>
                                        <span class="c1">// X264_RC_CRF恒定码率,  X264_RC_ABR平均码率</span>
        <span class="kt">int</span>  <span class="n">i_qp_constant</span><span class="p">;</span>             <span class="c1">// 指定P帧的量化值，0 - 51，0表示无损</span>
        <span class="kt">int</span>  <span class="n">i_qp_min</span><span class="p">;</span>                  <span class="c1">// 允许的最小量化值，默认10</span>
        <span class="kt">int</span>  <span class="n">i_qp_max</span><span class="p">;</span>                  <span class="c1">// 允许的最大量化值，默认51</span>
        <span class="kt">int</span>  <span class="n">i_qp_step</span><span class="p">;</span>                 <span class="c1">// 量化步长，即相邻两帧之间量化值之差的最大值</span>
        <span class="kt">int</span>   <span class="n">i_bitrate</span><span class="p">;</span>                <span class="c1">// 平均码率大小</span>
        <span class="kt">float</span>  <span class="n">f_rf_constant</span><span class="p">;</span>           <span class="c1">// 1pass VBR, nominal QP. 实际质量，值越大图像越花,越小越清晰</span>
        <span class="kt">float</span>  <span class="n">f_rf_constant_max</span><span class="p">;</span>       <span class="c1">// 最大码率因子，该选项仅在使用CRF并开启VBV时有效，</span>
                                        <span class="c1">// 图像质量的最大值，可能会导致VBV下溢。</span>
        <span class="kt">float</span>  <span class="n">f_rate_tolerance</span><span class="p">;</span>        <span class="c1">// 允许的误差</span>
        <span class="kt">int</span>    <span class="n">i_vbv_max_bitrate</span><span class="p">;</span>       <span class="c1">// 平均码率模式下，最大瞬时码率，默认0</span>
        <span class="kt">int</span>    <span class="n">i_vbv_buffer_size</span><span class="p">;</span>       <span class="c1">// 码率控制缓冲区的大小，单位kbit，默认0</span>
        <span class="kt">float</span>  <span class="n">f_vbv_buffer_init</span><span class="p">;</span>       <span class="c1">// 设置码率控制缓冲区（VBV）缓冲达到多满(百分比)，才开始回放，</span>
                                        <span class="c1">// 范围0~1.0，默认0.9</span>
        <span class="kt">float</span>  <span class="n">f_ip_factor</span><span class="p">;</span>             <span class="c1">// I帧和P帧之间的量化因子（QP）比值，默认1.4</span>
        <span class="kt">float</span>  <span class="n">f_pb_factor</span><span class="p">;</span>             <span class="c1">// P帧和B帧之间的量化因子（QP）比值，默认1.3</span>
        <span class="kt">int</span>   <span class="n">i_aq_mode</span><span class="p">;</span>                <span class="c1">// 自适应量化（AQ）模式。 0：关闭AQ  </span>
                                        <span class="c1">// 1：允许AQ在整个视频中和帧内重新分配码</span>
                                        <span class="c1">// 2：自方差AQ(实验阶段)，尝试逐帧调整强度</span>
        <span class="kt">float</span>  <span class="n">f_aq_strength</span><span class="p">;</span>           <span class="c1">// AQ强度，减少平趟和纹理区域的块效应和模糊度</span>

        <span class="cm">/* MBTree File是一个临时文件，记录了每个P帧中每个MB被参考的情况。</span>
<span class="cm">          目前mbtree只处理P帧的MB，同时也不支持b_pyramid. */</span>
        <span class="kt">int</span>   <span class="n">b_mb_tree</span><span class="p">;</span>                <span class="c1">// 是否开启基于macroblock的qp控制方法</span>
        <span class="kt">int</span>   <span class="n">i_lookahead</span><span class="p">;</span>              <span class="c1">// 决定mbtree向前预测的帧数</span>

        <span class="cm">/* 2pass */</span>
        <span class="kt">int</span>   <span class="n">b_stat_write</span><span class="p">;</span>             <span class="c1">// 是否将统计数据写入到文件psz_stat_out中</span>
        <span class="kt">char</span>  <span class="o">*</span><span class="n">psz_stat_out</span><span class="p">;</span>            <span class="c1">// 输出文件用于保存第一次编码统计数据</span>
        <span class="kt">int</span>   <span class="n">b_stat_read</span><span class="p">;</span>              <span class="c1">// 是否从文件psz_stat_in中读入统计数据</span>
        <span class="kt">char</span>  <span class="o">*</span><span class="n">psz_stat_in</span><span class="p">;</span>             <span class="c1">// 输入文件存有第一次编码的统计数据</span>

        <span class="cm">/* 2pass params (same as ffmpeg ones) */</span>
        <span class="kt">float</span>  <span class="n">f_qcompress</span><span class="p">;</span>             <span class="c1">// 量化曲线(quantizer curve)压缩因子。</span>
                                        <span class="c1">// 0.0 =&gt; 恒定比特率，1.0 =&gt; 恒定量化值。</span>
        <span class="kt">float</span>  <span class="n">f_qblur</span><span class="p">;</span>                 <span class="c1">// 时间上模糊量化，减少QP的波动(after curve compression)</span>
        <span class="kt">float</span>  <span class="n">f_complexity_blur</span><span class="p">;</span>       <span class="c1">// 时间上模糊复杂性，减少QP的波动(before curve compression)</span>
        <span class="kt">x264_zone_t</span> <span class="o">*</span><span class="n">zones</span><span class="p">;</span>             <span class="c1">// 码率控制覆盖</span>
        <span class="kt">int</span>    <span class="n">i_zones</span><span class="p">;</span>                 <span class="c1">// number of zone_t&#39;s</span>
        <span class="kt">char</span>  <span class="o">*</span><span class="n">psz_zones</span><span class="p">;</span>               <span class="c1">// 指定区的另一种方法</span>
    <span class="p">}</span> <span class="n">rc</span><span class="p">;</span>

    <span class="cm">/* 裁剪矩形窗口参数：隐式添加到分辨率非16倍数的视频中 */</span>
    <span class="cm">/* 在码流层指定一个切除(crop)矩形。若不想x264在编码时做crop，</span>
<span class="cm">       但希望解码器在回放时进行切除，可使用此项。单位为像素。 */</span>
    <span class="k">struct</span>
    <span class="p">{</span>
        <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">i_left</span><span class="p">;</span>
        <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">i_top</span><span class="p">;</span>
        <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">i_right</span><span class="p">;</span>
        <span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">i_bottom</span><span class="p">;</span>
    <span class="p">}</span> <span class="n">crop_rect</span><span class="p">;</span>

    <span class="cm">/* 编码3D视频时，此参数在码流中插入一个标志，告知解码器此3D视频是如何封装</span>
<span class="cm">      的。3D视频帧封装格式：帧封装、场交错、线交错、左右全景、左右半景、上下半</span>
<span class="cm">      景、L+深度、L+深度+图形+图形深度 */</span>
    <span class="kt">int</span>  <span class="n">i_frame_packing</span><span class="p">;</span>

    <span class="cm">/* Muxing复用参数 */</span>
    <span class="kt">int</span>  <span class="n">b_aud</span><span class="p">;</span>                     <span class="c1">// 生成访问单元分隔符</span>
    <span class="kt">int</span>  <span class="n">b_repeat_headers</span><span class="p">;</span>          <span class="c1">// 是否复制sps和pps放在每个关键帧的前面</span>
    <span class="kt">int</span>  <span class="n">b_annexb</span><span class="p">;</span>                  <span class="c1">// 值为true，则NALU之前是4字节前缀码0x00000001；</span>
                                    <span class="c1">// 值为false，则NALU之前的4个字节为NALU长度</span>
    <span class="kt">int</span>  <span class="n">i_sps_id</span><span class="p">;</span>                  <span class="c1">// sps和pps的id号</span>
    <span class="kt">int</span>  <span class="n">b_vfr_input</span><span class="p">;</span>               <span class="c1">// VFR输入。1 ：时间基和时间戳用于码率控制  0 ：仅帧率用于码率控制</span>
    <span class="kt">uint32_t</span>  <span class="n">i_fps_num</span><span class="p">;</span>            <span class="c1">// 帧率的分子</span>
    <span class="kt">uint32_t</span>  <span class="n">i_fps_den</span><span class="p">;</span>            <span class="c1">// 帧率的分母</span>
    <span class="kt">uint32_t</span>  <span class="n">i_timebase_num</span><span class="p">;</span>       <span class="c1">// 时间基的分子</span>
    <span class="kt">uint32_t</span>  <span class="n">i_timebase_den</span><span class="p">;</span>       <span class="c1">// 时间基的分母</span>

    <span class="cm">/* 以某个预设模式将输入流(隔行，恒定帧率)标记为软交错(soft telecine)。默认none. 可用预设有：</span>
<span class="cm">      none, 22, 32, 64, double, triple, euro.  使用除none以外任一预设，都会连带开启--pic-struct */</span>
    <span class="kt">int</span>  <span class="n">b_pulldown</span><span class="p">;</span>
    <span class="kt">int</span>  <span class="n">b_pic_struct</span><span class="p">;</span>              <span class="c1">// 强制在Picture Timing SEI传送pic_struct. 默认是未开启</span>

    <span class="cm">/* 将视频流标记为交错(隔行)，哪怕并非为交错式编码。可用于编码蓝光兼容的25p和30p视频。默认是未开启 */</span>
    <span class="kt">int</span> <span class="n">b_fake_interlaced</span><span class="p">;</span>

    <span class="cm">/* 条带参数 */</span>
    <span class="kt">int</span>  <span class="n">i_slice_max_size</span><span class="p">;</span>          <span class="c1">// 每个slice的最大字节数，包括预计的NAL开销</span>
    <span class="kt">int</span>  <span class="n">i_slice_max_mbs</span><span class="p">;</span>           <span class="c1">// 每个slice的最大宏块数，重写i_slice_count</span>
    <span class="kt">int</span>  <span class="n">i_slice_count</span><span class="p">;</span>             <span class="c1">// 每帧slice的数目，每个slice必须是矩形</span>
<span class="p">}</span> <span class="kt">x264_param_t</span><span class="p">;</span>
</pre></div>


<p>Original post: http://nkwavelet.blog.163.com/blog/static/2277560382013102010375030/</p>
                </div><!-- /.entry-content -->
                <div class="comments">
                <h2>Comments !</h2>
                        <div id="disqus_thread"></div>
                        <script type="text/javascript">
                           var disqus_identifier = "libx264-x264_param_t.html";
                           (function() {
                                var dsq = document.createElement('script');
                                dsq.type = 'text/javascript'; dsq.async = true;
                                dsq.src = 'http://icylord.disqus.com/embed.js';
                                (document.getElementsByTagName('head')[0] ||
                                 document.getElementsByTagName('body')[0]).appendChild(dsq);
                          })();
                        </script>
                </div>
        </article>
</section>
        </div><!--/span-->

                <div class="span3 well sidebar-nav" id="sidebar">
<ul class="nav nav-list">
<li class="nav-header"><h4><i class="icon-home icon-large"></i> social</h4></li>
<li><a href="http://icylord.github.io/" rel="alternate"><i class="icon-bookmark icon-large"></i>atom feed</a></li>
    <li><a href="#"><i class="icon-You can add links in your config file-sign icon-large"></i>You can add links in your config file</a></li>
    <li><a href="#"><i class="icon-Another social link-sign icon-large"></i>Another social link</a></li>

<li class="nav-header"><h4><i class="icon-folder-close icon-large"></i>Categories</h4></li>
<li>
<a href="http://icylord.github.io/category/c.html">
    <i class="icon-folder-open icon-large"></i>C++
</a>
</li>
<li>
<a href="http://icylord.github.io/category/computer-vision.html">
    <i class="icon-folder-open icon-large"></i>Computer Vision
</a>
</li>
<li>
<a href="http://icylord.github.io/category/multimedia.html">
    <i class="icon-folder-open icon-large"></i>Multimedia
</a>
</li>
<li>
<a href="http://icylord.github.io/category/shell.html">
    <i class="icon-folder-open icon-large"></i>Shell
</a>
</li>

<li class="nav-header"><h4><i class="icon-tags icon-large"></i>Tags</h4></li>
<li class="tag-2">
    <a href="http://icylord.github.io/tag/c.html">
        <i class="icon-tag icon-large"></i>C++
    </a>
</li>
<li class="tag-2">
    <a href="http://icylord.github.io/tag/opencv.html">
        <i class="icon-tag icon-large"></i>OpenCV
    </a>
</li>
<li class="tag-0">
    <a href="http://icylord.github.io/tag/computer-vision.html">
        <i class="icon-tag icon-large"></i>Computer Vision
    </a>
</li>
<li class="tag-2">
    <a href="http://icylord.github.io/tag/python.html">
        <i class="icon-tag icon-large"></i>Python
    </a>
</li>
<li class="tag-2">
    <a href="http://icylord.github.io/tag/h264.html">
        <i class="icon-tag icon-large"></i>H.264
    </a>
</li>
<li class="tag-4">
    <a href="http://icylord.github.io/tag/directshow.html">
        <i class="icon-tag icon-large"></i>Directshow
    </a>
</li>
<li class="tag-4">
    <a href="http://icylord.github.io/tag/shell.html">
        <i class="icon-tag icon-large"></i>Shell
    </a>
</li>


</ul>        </div><!--/.well -->

      </div><!--/row-->

      <hr>

      <footer>
        <address id="about">
                Proudly powered by <a href="http://pelican.notmyidea.org/">Pelican <i class="icon-external-link"></i></a>,
                                which takes great advantage of <a href="http://python.org">Python <i class="icon-external-link"></i></a>.
        </address><!-- /#about -->

        <p>The theme is from <a href="http://twitter.github.com/bootstrap/">Bootstrap from Twitter <i class="icon-external-link"></i></a>,
                   and <a href="http://fortawesome.github.com/Font-Awesome/">Font-Awesome <i class="icon-external-link"></i></a>, thanks!</p>
      </footer>

    </div><!--/.fluid-container-->


<script type="text/javascript">
    var disqus_shortname = 'icylord';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>

    <!-- Le javascript -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="http://icylord.github.io/theme/js/jquery-1.7.2.min.js"></script>
    <script src="http://icylord.github.io/theme/js/bootstrap.min.js"></script>
  </body>
</html>